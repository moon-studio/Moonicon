import{d as Be,q as Ne,s as Ve,r as R,a as x,n as Ae,b as qe,o as Ge,h as z,F as Je,T as Se,m as Ke}from"./index.cf1e5396.js";import{c as Qe,g as y,h as Ze,a as le,e as de,d as ie,u as He,i as en,f as nn}from"./light.e530bc26.js";import{u as tn}from"./use-config.f834df0a.js";import{V as Re}from"./VResizeObserver.848b2620.js";function on(n){return n.composedPath()[0]||null}const xe=Be({render(){var n,a;return(a=(n=this.$slots).default)===null||a===void 0?void 0:a.call(n)}});function ae(n){return n.composedPath()[0]}const rn={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function ln(n,a,s){if(n==="mousemoveoutside"){const f=i=>{a.contains(ae(i))||s(i)};return{mousemove:f,touchstart:f}}else if(n==="clickoutside"){let f=!1;const i=p=>{f=!a.contains(ae(p))},h=p=>{!f||a.contains(ae(p))||s(p)};return{mousedown:i,mouseup:h,touchstart:i,touchend:h}}return console.error(`[evtd/create-trap-handler]: name \`${n}\` is invalid. This could be a bug of evtd.`),{}}function ye(n,a,s){const f=rn[n];let i=f.get(a);i===void 0&&f.set(a,i=new WeakMap);let h=i.get(s);return h===void 0&&i.set(s,h=ln(n,a,s)),h}function an(n,a,s,f){if(n==="mousemoveoutside"||n==="clickoutside"){const i=ye(n,a,s);return Object.keys(i).forEach(h=>{oe(h,document,i[h],f)}),!0}return!1}function sn(n,a,s,f){if(n==="mousemoveoutside"||n==="clickoutside"){const i=ye(n,a,s);return Object.keys(i).forEach(h=>{G(h,document,i[h],f)}),!0}return!1}function cn(){if(typeof window>"u")return{on:()=>{},off:()=>{}};const n=new WeakMap,a=new WeakMap;function s(){n.set(this,!0)}function f(){n.set(this,!0),a.set(this,!0)}function i(t,o,c){const u=t[o];return t[o]=function(){return c.apply(t,arguments),u.apply(t,arguments)},t}function h(t,o){t[o]=Event.prototype[o]}const p=new WeakMap,O=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function C(){var t;return(t=p.get(this))!==null&&t!==void 0?t:null}function M(t,o){O!==void 0&&Object.defineProperty(t,"currentTarget",{configurable:!0,enumerable:!0,get:o!=null?o:O.get})}const g={bubble:{},capture:{}},m={};function I(){const t=function(o){const{type:c,eventPhase:u,bubbles:b}=o,E=ae(o);if(u===2)return;const P=u===1?"capture":"bubble";let B=E;const S=[];for(;B===null&&(B=window),S.push(B),B!==window;)B=B.parentNode||null;const W=g.capture[c],k=g.bubble[c];if(i(o,"stopPropagation",s),i(o,"stopImmediatePropagation",f),M(o,C),P==="capture"){if(W===void 0)return;for(let $=S.length-1;$>=0&&!n.has(o);--$){const U=S[$],V=W.get(U);if(V!==void 0){p.set(o,U);for(const X of V){if(a.has(o))break;X(o)}}if($===0&&!b&&k!==void 0){const X=k.get(U);if(X!==void 0)for(const re of X){if(a.has(o))break;re(o)}}}}else if(P==="bubble"){if(k===void 0)return;for(let $=0;$<S.length&&!n.has(o);++$){const U=S[$],V=k.get(U);if(V!==void 0){p.set(o,U);for(const X of V){if(a.has(o))break;X(o)}}}}h(o,"stopPropagation"),h(o,"stopImmediatePropagation"),M(o)};return t.displayName="evtdUnifiedHandler",t}function j(){const t=function(o){const{type:c,eventPhase:u}=o;if(u!==2)return;const b=m[c];b!==void 0&&b.forEach(E=>E(o))};return t.displayName="evtdUnifiedWindowEventHandler",t}const _=I(),F=j();function L(t,o){const c=g[t];return c[o]===void 0&&(c[o]=new Map,window.addEventListener(o,_,t==="capture")),c[o]}function N(t){return m[t]===void 0&&(m[t]=new Set,window.addEventListener(t,F)),m[t]}function J(t,o){let c=t.get(o);return c===void 0&&t.set(o,c=new Set),c}function Z(t,o,c,u){const b=g[o][c];if(b!==void 0){const E=b.get(t);if(E!==void 0&&E.has(u))return!0}return!1}function ee(t,o){const c=m[t];return!!(c!==void 0&&c.has(o))}function ne(t,o,c,u){let b;if(typeof u=="object"&&u.once===!0?b=W=>{T(t,o,b,u),c(W)}:b=c,an(t,o,b,u))return;const P=u===!0||typeof u=="object"&&u.capture===!0?"capture":"bubble",B=L(P,t),S=J(B,o);if(S.has(b)||S.add(b),o===window){const W=N(t);W.has(b)||W.add(b)}}function T(t,o,c,u){if(sn(t,o,c,u))return;const E=u===!0||typeof u=="object"&&u.capture===!0,P=E?"capture":"bubble",B=L(P,t),S=J(B,o);if(o===window&&!Z(o,E?"bubble":"capture",t,c)&&ee(t,c)){const k=m[t];k.delete(c),k.size===0&&(window.removeEventListener(t,F),m[t]=void 0)}S.has(c)&&S.delete(c),S.size===0&&B.delete(o),B.size===0&&(window.removeEventListener(t,_,P==="capture"),g[P][t]=void 0)}return{on:ne,off:T}}const{on:oe,off:G}=cn(),un=(typeof window>"u"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function dn(){return un}function fn(n){const a={isDeactivated:!1};let s=!1;return Ne(()=>{if(a.isDeactivated=!1,!s){s=!0;return}n()}),Ve(()=>{a.isDeactivated=!0,s||(s=!0)}),a}const hn=n=>{const{scrollbarColor:a,scrollbarColorHover:s}=n;return{color:a,colorHover:s}},vn={name:"Scrollbar",common:Qe,self:hn},bn=vn,{cubicBezierEaseInOut:Te}=Ze;function wn({name:n="fade-in",enterDuration:a="0.2s",leaveDuration:s="0.2s",enterCubicBezier:f=Te,leaveCubicBezier:i=Te}={}){return[y(`&.${n}-transition-enter-active`,{transition:`all ${a} ${f}!important`}),y(`&.${n}-transition-leave-active`,{transition:`all ${s} ${i}!important`}),y(`&.${n}-transition-enter-from, &.${n}-transition-leave-to`,{opacity:0}),y(`&.${n}-transition-leave-from, &.${n}-transition-enter-to`,{opacity:1})]}const mn=le("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[y(">",[le("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 max-height: inherit;
 scrollbar-width: none;
 `,[y("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),y(">",[le("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])])]),y(">, +",[le("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 -webkit-user-select: none;
 `,[de("horizontal",`
 left: 2px;
 right: 2px;
 bottom: 4px;
 height: var(--n-scrollbar-height);
 `,[y(">",[ie("scrollbar",`
 height: var(--n-scrollbar-height);
 border-radius: var(--n-scrollbar-border-radius);
 right: 0;
 `)])]),de("vertical",`
 right: 4px;
 top: 2px;
 bottom: 2px;
 width: var(--n-scrollbar-width);
 `,[y(">",[ie("scrollbar",`
 width: var(--n-scrollbar-width);
 border-radius: var(--n-scrollbar-border-radius);
 bottom: 0;
 `)])]),de("disabled",[y(">",[ie("scrollbar",{pointerEvents:"none"})])]),y(">",[ie("scrollbar",`
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--n-scrollbar-color);
 transition: background-color .2s var(--n-scrollbar-bezier);
 `,[wn(),y("&:hover",{backgroundColor:"var(--n-scrollbar-color-hover)"})])])])])]),pn=Object.assign(Object.assign({},He.props),{size:{type:Number,default:5},duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:Boolean,trigger:{type:String,default:"hover"},useUnifiedContainer:Boolean,triggerDisplayManually:Boolean,container:Function,content:Function,containerClass:String,containerStyle:[String,Object],contentClass:String,contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function,internalHoistYRail:Boolean}),Ee=Be({name:"Scrollbar",props:pn,inheritAttrs:!1,setup(n){const{mergedClsPrefixRef:a,inlineThemeDisabled:s,mergedRtlRef:f}=tn(n),i=en("Scrollbar",f,a),h=R(null),p=R(null),O=R(null),C=R(null),M=R(null),g=R(null),m=R(null),I=R(null),j=R(null),_=R(null),F=R(null),L=R(0),N=R(0),J=R(!1),Z=R(!1);let ee=!1,ne=!1,T,t,o=0,c=0,u=0,b=0;const E=dn(),P=x(()=>{const{value:e}=I,{value:r}=g,{value:l}=_;return e===null||r===null||l===null?0:Math.min(e,l*e/r+n.size*1.5)}),B=x(()=>`${P.value}px`),S=x(()=>{const{value:e}=j,{value:r}=m,{value:l}=F;return e===null||r===null||l===null?0:l*e/r+n.size*1.5}),W=x(()=>`${S.value}px`),k=x(()=>{const{value:e}=I,{value:r}=L,{value:l}=g,{value:d}=_;if(e===null||l===null||d===null)return 0;{const w=l-e;return w?r/w*(d-P.value):0}}),$=x(()=>`${k.value}px`),U=x(()=>{const{value:e}=j,{value:r}=N,{value:l}=m,{value:d}=F;if(e===null||l===null||d===null)return 0;{const w=l-e;return w?r/w*(d-S.value):0}}),V=x(()=>`${U.value}px`),X=x(()=>{const{value:e}=I,{value:r}=g;return e!==null&&r!==null&&r>e}),re=x(()=>{const{value:e}=j,{value:r}=m;return e!==null&&r!==null&&r>e}),Pe=x(()=>{const{trigger:e}=n;return e==="none"||J.value}),ze=x(()=>{const{trigger:e}=n;return e==="none"||Z.value}),A=x(()=>{const{container:e}=n;return e?e():p.value}),Me=x(()=>{const{content:e}=n;return e?e():O.value}),fe=fn(()=>{n.container||he({top:L.value,left:N.value})}),We=()=>{fe.isDeactivated||q()},$e=e=>{if(fe.isDeactivated)return;const{onResize:r}=n;r&&r(e),q()},he=(e,r)=>{if(!n.scrollable)return;if(typeof e=="number"){K(r!=null?r:0,e,0,!1,"auto");return}const{left:l,top:d,index:w,elSize:H,position:D,behavior:v,el:Y,debounce:te=!0}=e;(l!==void 0||d!==void 0)&&K(l!=null?l:0,d!=null?d:0,0,!1,v),Y!==void 0?K(0,Y.offsetTop,Y.offsetHeight,te,v):w!==void 0&&H!==void 0?K(0,w*H,H,te,v):D==="bottom"?K(0,Number.MAX_SAFE_INTEGER,0,!1,v):D==="top"&&K(0,0,0,!1,v)},Ce=(e,r)=>{if(!n.scrollable)return;const{value:l}=A;!l||(typeof e=="object"?l.scrollBy(e):l.scrollBy(e,r||0))};function K(e,r,l,d,w){const{value:H}=A;if(!!H){if(d){const{scrollTop:D,offsetHeight:v}=H;if(r>D){r+l<=D+v||H.scrollTo({left:e,top:r+l-v,behavior:w});return}}H.scrollTo({left:e,top:r,behavior:w})}}function Le(){Ye(),Oe(),q()}function ke(){se()}function se(){Xe(),De()}function Xe(){t!==void 0&&window.clearTimeout(t),t=window.setTimeout(()=>{Z.value=!1},n.duration)}function De(){T!==void 0&&window.clearTimeout(T),T=window.setTimeout(()=>{J.value=!1},n.duration)}function Ye(){T!==void 0&&window.clearTimeout(T),J.value=!0}function Oe(){t!==void 0&&window.clearTimeout(t),Z.value=!0}function Ie(e){const{onScroll:r}=n;r&&r(e),ve()}function ve(){const{value:e}=A;e&&(L.value=e.scrollTop,N.value=e.scrollLeft*(i!=null&&i.value?-1:1))}function je(){const{value:e}=Me;e&&(g.value=e.offsetHeight,m.value=e.offsetWidth);const{value:r}=A;r&&(I.value=r.offsetHeight,j.value=r.offsetWidth);const{value:l}=M,{value:d}=C;l&&(F.value=l.offsetWidth),d&&(_.value=d.offsetHeight)}function be(){const{value:e}=A;e&&(L.value=e.scrollTop,N.value=e.scrollLeft*(i!=null&&i.value?-1:1),I.value=e.offsetHeight,j.value=e.offsetWidth,g.value=e.scrollHeight,m.value=e.scrollWidth);const{value:r}=M,{value:l}=C;r&&(F.value=r.offsetWidth),l&&(_.value=l.offsetHeight)}function q(){!n.scrollable||(n.useUnifiedContainer?be():(je(),ve()))}function we(e){var r;return!(!((r=h.value)===null||r===void 0)&&r.contains(on(e)))}function Ue(e){e.preventDefault(),e.stopPropagation(),ne=!0,oe("mousemove",window,me,!0),oe("mouseup",window,pe,!0),c=N.value,u=i!=null&&i.value?window.innerWidth-e.clientX:e.clientX}function me(e){if(!ne)return;T!==void 0&&window.clearTimeout(T),t!==void 0&&window.clearTimeout(t);const{value:r}=j,{value:l}=m,{value:d}=S;if(r===null||l===null)return;const H=(i!=null&&i.value?window.innerWidth-e.clientX-u:e.clientX-u)*(l-r)/(r-d),D=l-r;let v=c+H;v=Math.min(D,v),v=Math.max(v,0);const{value:Y}=A;if(Y){Y.scrollLeft=v*(i!=null&&i.value?-1:1);const{internalOnUpdateScrollLeft:te}=n;te&&te(v)}}function pe(e){e.preventDefault(),e.stopPropagation(),G("mousemove",window,me,!0),G("mouseup",window,pe,!0),ne=!1,q(),we(e)&&se()}function _e(e){e.preventDefault(),e.stopPropagation(),ee=!0,oe("mousemove",window,ce,!0),oe("mouseup",window,ue,!0),o=L.value,b=e.clientY}function ce(e){if(!ee)return;T!==void 0&&window.clearTimeout(T),t!==void 0&&window.clearTimeout(t);const{value:r}=I,{value:l}=g,{value:d}=P;if(r===null||l===null)return;const H=(e.clientY-b)*(l-r)/(r-d),D=l-r;let v=o+H;v=Math.min(D,v),v=Math.max(v,0);const{value:Y}=A;Y&&(Y.scrollTop=v)}function ue(e){e.preventDefault(),e.stopPropagation(),G("mousemove",window,ce,!0),G("mouseup",window,ue,!0),ee=!1,q(),we(e)&&se()}Ae(()=>{const{value:e}=re,{value:r}=X,{value:l}=a,{value:d}=M,{value:w}=C;d&&(e?d.classList.remove(`${l}-scrollbar-rail--disabled`):d.classList.add(`${l}-scrollbar-rail--disabled`)),w&&(r?w.classList.remove(`${l}-scrollbar-rail--disabled`):w.classList.add(`${l}-scrollbar-rail--disabled`))}),qe(()=>{n.container||q()}),Ge(()=>{T!==void 0&&window.clearTimeout(T),t!==void 0&&window.clearTimeout(t),G("mousemove",window,ce,!0),G("mouseup",window,ue,!0)});const Fe=He("Scrollbar","-scrollbar",mn,bn,n,a),ge=x(()=>{const{common:{cubicBezierEaseInOut:e,scrollbarBorderRadius:r,scrollbarHeight:l,scrollbarWidth:d},self:{color:w,colorHover:H}}=Fe.value;return{"--n-scrollbar-bezier":e,"--n-scrollbar-color":w,"--n-scrollbar-color-hover":H,"--n-scrollbar-border-radius":r,"--n-scrollbar-width":d,"--n-scrollbar-height":l}}),Q=s?nn("scrollbar",void 0,ge,n):void 0;return Object.assign(Object.assign({},{scrollTo:he,scrollBy:Ce,sync:q,syncUnifiedContainer:be,handleMouseEnterWrapper:Le,handleMouseLeaveWrapper:ke}),{mergedClsPrefix:a,rtlEnabled:i,containerScrollTop:L,wrapperRef:h,containerRef:p,contentRef:O,yRailRef:C,xRailRef:M,needYBar:X,needXBar:re,yBarSizePx:B,xBarSizePx:W,yBarTopPx:$,xBarLeftPx:V,isShowXBar:Pe,isShowYBar:ze,isIos:E,handleScroll:Ie,handleContentResize:We,handleContainerResize:$e,handleYScrollMouseDown:_e,handleXScrollMouseDown:Ue,cssVars:s?void 0:ge,themeClass:Q==null?void 0:Q.themeClass,onRender:Q==null?void 0:Q.onRender})},render(){var n;const{$slots:a,mergedClsPrefix:s,triggerDisplayManually:f,rtlEnabled:i,internalHoistYRail:h}=this;if(!this.scrollable)return(n=a.default)===null||n===void 0?void 0:n.call(a);const p=this.trigger==="none",O=()=>z("div",{ref:"yRailRef",class:[`${s}-scrollbar-rail`,`${s}-scrollbar-rail--vertical`],"data-scrollbar-rail":!0,style:this.verticalRailStyle,"aria-hidden":!0},z(p?xe:Se,p?null:{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?z("div",{class:`${s}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),C=()=>{var g,m;return(g=this.onRender)===null||g===void 0||g.call(this),z("div",Ke(this.$attrs,{role:"none",ref:"wrapperRef",class:[`${s}-scrollbar`,this.themeClass,i&&`${s}-scrollbar--rtl`],style:this.cssVars,onMouseenter:f?void 0:this.handleMouseEnterWrapper,onMouseleave:f?void 0:this.handleMouseLeaveWrapper}),[this.container?(m=a.default)===null||m===void 0?void 0:m.call(a):z("div",{role:"none",ref:"containerRef",class:[`${s}-scrollbar-container`,this.containerClass],style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},z(Re,{onResize:this.handleContentResize},{default:()=>z("div",{ref:"contentRef",role:"none",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${s}-scrollbar-content`,this.contentClass]},a)})),h?null:O(),this.xScrollable&&z("div",{ref:"xRailRef",class:[`${s}-scrollbar-rail`,`${s}-scrollbar-rail--horizontal`],style:this.horizontalRailStyle,"data-scrollbar-rail":!0,"aria-hidden":!0},z(p?xe:Se,p?null:{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?z("div",{class:`${s}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,right:i?this.xBarLeftPx:void 0,left:i?void 0:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))])},M=this.container?C():z(Re,{onResize:this.handleContainerResize},{default:C});return h?z(Je,null,M,O()):M}}),Bn=Ee,Hn=Ee;export{Bn as N,Hn as X,G as a,on as g,oe as o,bn as s,fn as u};
